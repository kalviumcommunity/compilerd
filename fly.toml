# fly.toml file for Code Judge Project

# App configuration
app = "code-judge-project"

# Define the services (containers)
[[services]]
  internal_port = 3000  # Internal port where your Node.js app runs

  # Service configuration
  [services.concurrency]
    hard_limit = 10  # Maximum number of instances running

  [services.config]
    NODE_ENV = "production"  # Set environment variables
    PORT = 3000              # Set port to 3000 (or use process.env.PORT)

# Configure deployment targets
[[deploy.targets]]
  name = "production"
  app_id = "your-production-app-id"
  release_command = "npm start"  # Command to start your Node.js application

  [deploy.targets.env]
    NODE_ENV = "production"

[[deploy.targets]]
  name = "staging"
  app_id = "your-staging-app-id"
  release_command = "npm start"

  [deploy.targets.env]
    NODE_ENV = "staging"
